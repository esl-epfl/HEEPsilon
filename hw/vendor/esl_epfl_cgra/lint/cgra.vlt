// Copyright 2022 EPFL
// Solderpad Hardware License, Version 2.1, see LICENSE.md for details.
// SPDX-License-Identifier: Apache-2.0 WITH SHL-2.1

`verilator_config

// clk_i is indeed not used but kept for potential use
lint_off -rule UNUSED    -file "*esl_epfl_cgra/hw/rtl/context_memory.sv" -match "Signal is not used: 'clk_i'"

// cgra_reg_top.sv is generated by regtool and kept as it is to avoid manually update it whenever the file is generated
lint_off -rule WIDTH     -file "*esl_epfl_cgra/hw/rtl/cgra_reg_top.sv" -match "Operator ASSIGNW expects *"

// Minus index are used to create RCs interconnection, which trigger these warnings
lint_off -rule LITENDIAN -file "*esl_epfl_cgra/hw/rtl/cgra_rcs.sv" -match "Little bit endian vector: left < right of bit range: *"

// Some bits are indeed not used but full width is kept for concise code
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/synchronizer.sv" -match "Bits of signal are not used: 'conf_word_i'*"
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/cgra_controller.sv" -match "Bits of signal are not used: 'kmem_rdata_i'*"
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/context_memory_decoder.sv" -match "Bits of signal are not used: 'cm_add_i'*"
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/context_memory_decoder.sv" -match "Bits of signal are not used: 'cm_wdata_i'*"

// For loop variable (32 bits) compared with an actual signal
lint_off -rule WIDTH  -file "*esl_epfl_cgra/hw/rtl/context_memory_decoder.sv" -match "Operator EQ expects 32 bits on the LHS, but LHS's VARREF 'bk_sel' generates *"

// Clock gating unit used for RTL simulator only
lint_off -rule UNOPTFLAT -file "*esl_epfl_cgra/sim/cgra_clock_gate.sv" -match "Signal unoptimizable: Feedback to clock or circular logic*"

// Signal is kept to have the full interface signal with bus interconnection
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/context_memory_decoder.sv" -match "Signal is not used: 'cm_be_i'"

// Signal is not used by the sim wrapper for sram but can be used with a memory macro that enable retention
lint_off -rule UNUSED -file "*esl_epfl_cgra/sim/cgra_sram_wrapper.sv" -match "Signal is not used: 'set_retentive_ni'"

// There are 2 unused registers for now
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/peripheral_regs.sv" -match "Bits of signal are not used: 'reg2hw'[63:0]"

// Bit 33 is for overflow and bit 0 is used for rounding during fixed-point multiplication
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/alu.sv" -match "Bits of signal are not used: 'adder_result_full'[33,0]"

// Bit 0 is used for rounding during fixed-point multiplication
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/alu.sv" -match "Bits of signal are not used: 'fxp_mult_scaled'[0]"

// Only the lowest 32 bits are kept for standard multiplication and bits [46:14] for fixed-point multiplication
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/alu.sv" -match "Bits of signal are not used: 'mult_result_full'[63:47]"

// Extra bit used for right arithmetic shift
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/alu.sv" -match "Bits of signal are not used: 'shift_right_result_33b'[32]"

// The tool detect multiple drivers at the same line of code (the tool does not interpret the for loop correctly?)
lint_off -rule MULTIDRIVEN -file "*esl_epfl_cgra/hw/rtl/cgra_rcs.sv" -match "Signal has multiple driving blocks with different clocking: 'testharness.heepsilon_top_i.cgra_top_wrapper_i.cgra_top_i.cgra_rcs_i.gnt_mask'*"
lint_off -rule MULTIDRIVEN -file "*esl_epfl_cgra/hw/rtl/cgra_rcs.sv" -match "Signal has multiple driving blocks with different clocking: 'testharness.heepsilon_top_i.cgra_top_wrapper_i.cgra_top_i.cgra_rcs_i.rvalid_mask'*"
lint_off -rule MULTIDRIVEN -file "*esl_epfl_cgra/hw/rtl/cgra_rcs.sv" -match "Signal has multiple driving blocks with different clocking: 'testharness.heepsilon_top_i.cgra_top_wrapper_i.cgra_top_i.cgra_rcs_i.rcs_flag_reg'*"
lint_off -rule MULTIDRIVEN -file "*esl_epfl_cgra/hw/rtl/cgra_rcs.sv" -match "Signal has multiple driving blocks with different clocking: 'testharness.heepsilon_top_i.cgra_top_wrapper_i.cgra_top_i.cgra_rcs_i.rcs_res_reg'*"
lint_off -rule MULTIDRIVEN -file "*esl_epfl_cgra/hw/rtl/cgra_rcs.sv" -match "Signal has multiple driving blocks with different clocking: 'testharness.heepsilon_top_i.cgra_top_wrapper_i.cgra_top_i.cgra_rcs_i.rcs_res_reg_temp'*"
lint_off -rule MULTIDRIVEN -file "*esl_epfl_cgra/hw/rtl/cgra_rcs.sv" -match "Signal has multiple driving blocks with different clocking: 'testharness.heepsilon_top_i.cgra_top_wrapper_i.cgra_top_i.cgra_rcs_i.rcs_flag_reg_temp'*"

lint_off -rule MULTIDRIVEN -file "*esl_epfl_cgra/hw/rtl/cgra_rcs.sv" -match "Signal has multiple driving blocks with different clocking: 'testharness.heepsilon_top_i.cgra_top_wrapper_i.cgra_top_i.cgra_rcs_i.rcs_flag_reg_temp'*"

// Remove clock gating instance for verilator simulation otherwise sim is failing (verilator v4.2)
lint_off -rule UNUSED -file "*esl_epfl_cgra/hw/rtl/cgra_top.sv" -match "Signal is not used: 'rcs_col_e_s'"

lint_off -rule WIDTH -file "*esl_epfl_cgra/hw/rtl/data_bus_handler.sv" -match "Operator ADD expects *"
